{% extends 'base.html' %}
{% load crispy_forms_tags %}


{% block content %}
<div class="card">
    <div class="card-header bg-info text-white">
        <h3>Step 3: Add Table Headers</h3>
    </div>
    <div class="card-body">
        <form method="post">
        <input type="hidden" name="table_id" value="{{ tableId }}">
        <input type="hidden" name="quotation_id" value="{{ quotationId }}">
        <input type="hidden" name="field_id" value="{{ fieldId }}">
            {% csrf_token %}
            {{ forms|crispy }}
            <button type="submit" class="btn btn-info">Add Header</button>
        </form>
        <hr>
        <h4>Table Headers</h4>
        <table id="tblHeaders" class="table table-striped table-bordered width-full isoViewTbl">
            <thead>
                <tr>
                    <th class="all">Field Name</th>
                    <th class="all">Field Type</th>
                    <th class="all text-center statusTd">Action</th>
                </tr>
            </thead>
            <tbody>
                {% for tableData in tableHeadersData %}
                    <tr class="odd" id='{{ tableData.id}}'>
                        <td class=""> {{ tableData.field_name}}</td>
                        <td class=""> {{ tableData.field_type.field_type}}</td>
                        <td class="text-nowrap text-center">                      
                            <span>
                                <a href="{% url 'add_table' %}?customer_id={{ tableData.table.quotation.customer.id }}&quotation_id={{tableData.table.quotation.id}}&table_id={{tableData.table_id}}" title="Edit">
                                    <span><i class="fa fa-edit text-blue fa-lg"></i></span>
                                </a>
                            </span>
                        </td>
                    </tr> 
                {% empty %}
					<tr>
                        <td colspan="8" class="text-center">No record found</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table> 

        <span class="ms-2">
            <a class="btn btn-info" href="{% url 'add_table_value' %}?customer_id={{ request.session.customer_id }}&quotation_id={{quotationId}}&table_id={{tableId}}" title="Add">
                Next â†’ Add Table Values
            </a>
        </span>
        
    </div>
</div>
{% endblock %}